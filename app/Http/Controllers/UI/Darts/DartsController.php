<?php

namespace App\Http\Controllers\UI\Darts;

use Illuminate\Http\Request;
use App\Http\Controllers\Controller;
use Auth;
use DB;
use Gate;
use Session;
use App\Models\User;
use App\Models\DartsGame;
use App\Models\DartsScore;
use App\Models\DartsPlayer;

class DartsController extends Controller
{
##################################################################################################################
#  ██████╗ ██████╗ ███╗   ██╗███████╗████████╗██████╗ ██╗   ██╗ ██████╗████████╗
# ██╔════╝██╔═══██╗████╗  ██║██╔════╝╚══██╔══╝██╔══██╗██║   ██║██╔════╝╚══██╔══╝
# ██║     ██║   ██║██╔██╗ ██║███████╗   ██║   ██████╔╝██║   ██║██║        ██║   
# ██║     ██║   ██║██║╚██╗██║╚════██║   ██║   ██╔══██╗██║   ██║██║        ██║   
# ╚██████╗╚██████╔╝██║ ╚████║███████║   ██║   ██║  ██║╚██████╔╝╚██████╗   ██║   
#  ╚═════╝ ╚═════╝ ╚═╝  ╚═══╝╚══════╝   ╚═╝   ╚═╝  ╚═╝ ╚═════╝  ╚═════╝   ╚═╝   
##################################################################################################################
   public function __construct()
   {
      $this->middleware('auth');
   }


##################################################################################################################
# ██╗███╗   ██╗██████╗ ███████╗██╗  ██╗
# ██║████╗  ██║██╔══██╗██╔════╝╚██╗██╔╝
# ██║██╔██╗ ██║██║  ██║█████╗   ╚███╔╝ 
# ██║██║╚██╗██║██║  ██║██╔══╝   ██╔██╗ 
# ██║██║ ╚████║██████╔╝███████╗██╔╝ ██╗
# ╚═╝╚═╝  ╚═══╝╚═════╝ ╚══════╝╚═╝  ╚═╝
// Display a list of resources
##################################################################################################################
	public function index() //Leaderboard
	{
		// Check if user has required permission
		abort_unless(Gate::allows('dart-access'), 403);

		$players = User::whereNotIn('id',[1,2])
			->whereNotNull('first_name')
			->whereNotNull('last_name')
			// ->whereNotNull('dart_doubleOut')
			->where('dart_doubleOut','>=',2)
			->orderby('last_name', 'asc')
			->get();
		// dd($players);

		return view('UI.darts.index', compact('players'));
	}


##################################################################################################################
#  ██████╗  █████╗ ███╗   ███╗███████╗███████╗    ██████╗  ██████╗  █████╗ ██████╗ ██████╗ 
# ██╔════╝ ██╔══██╗████╗ ████║██╔════╝██╔════╝    ██╔══██╗██╔═══██╗██╔══██╗██╔══██╗██╔══██╗
# ██║  ███╗███████║██╔████╔██║█████╗  ███████╗    ██████╔╝██║   ██║███████║██████╔╝██║  ██║
# ██║   ██║██╔══██║██║╚██╔╝██║██╔══╝  ╚════██║    ██╔══██╗██║   ██║██╔══██║██╔══██╗██║  ██║
# ╚██████╔╝██║  ██║██║ ╚═╝ ██║███████╗███████║    ██████╔╝╚██████╔╝██║  ██║██║  ██║██████╔╝
#  ╚═════╝ ╚═╝  ╚═╝╚═╝     ╚═╝╚══════╝╚══════╝    ╚═════╝  ╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═╝╚═════╝ 
// Display the specified resource
##################################################################################################################
	public function board()
	{
		// Check if user has required permission
		abort_unless(Gate::allows('dart-access'), 403);
      
		$games = DartsGame::orderby('id','desc')->paginate(10);
		return view('UI.darts.games.board', compact('games'));
	}


}
